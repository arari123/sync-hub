# PRD: 일정 관리 WBS 페이지 (프로젝트 공통 저장)

## 목적
- 임시 화면으로 남아 있던 `일정 관리`를 실제 WBS 작성/편집 페이지로 구현한다.
- 프로젝트 단위의 공통 일정 데이터를 저장하고 재사용한다.

## 요구사항

### SCH-REQ-001: 데이터 저장/조회
- [AC-1] 프로젝트 단위 일정 JSON(`schedule_wbs_json`)을 저장/조회할 수 있어야 한다.
- [AC-2] 기본 루트 그룹 `설계/제작/설치`는 항상 존재해야 한다.
- [AC-3] 일정 데이터가 없거나 잘못된 경우 기본 템플릿을 반환해야 한다.

### SCH-REQ-002: WBS 편집
- [AC-1] 그룹/일정 행 추가, 이름 수정, 삭제, 위치 이동(드래그 + 위/아래 버튼)을 지원해야 한다.
- [AC-2] 그룹은 중첩 가능하며, 커스텀 그룹은 동일 기본 그룹 내부에서만 생성 가능해야 한다.
- [AC-3] 기본 루트 그룹은 삭제/명칭 수정이 불가능해야 한다.
- [AC-4] 일정 행은 단일 부모 그룹만 가질 수 있어야 한다.

### SCH-REQ-003: 일정 계산 규칙
- [AC-1] 전역 연쇄(설계 -> 제작 -> 설치 순서 + 그룹 내 정렬 순서)로 후속 일정 자동 보정이 동작해야 한다.
- [AC-2] 시작/종료일 직접 입력 시 작업일이 자동 계산되어야 한다.
- [AC-3] 작업일 입력 시 이전 일정 기반으로 시작/종료일이 자동 계산되어야 한다.
- [AC-4] 시작일만 입력 시 단일 일정으로 자동 보정되어야 한다.
- [AC-5] 주말 포함/제외 모드를 지원해야 한다.
- [AC-6] `event` 타입은 `duration_days=0`, `start_date=end_date`여야 한다.

### SCH-REQ-004: 일정 시각화
- [AC-1] 간트 차트는 일/주/월 단위 자동 전환을 지원해야 한다.
- [AC-2] 자동 전환 기준은 `<=45일: 일`, `<=240일: 주`, `그 이상: 월` 이어야 한다.
- [AC-3] 주말 제외 모드일 때 비업무일 배경 톤 분리를 제공해야 한다.

### SCH-REQ-005: 외부 일정 불러오기
- [AC-1] 다른 프로젝트의 일정을 조회해 현재 프로젝트 편집 상태에 덮어쓸 수 있어야 한다.
- [AC-2] 불러오기 즉시 서버 저장하지 않고, 명시적 `저장` 버튼으로 확정해야 한다.

## 범위
- 백엔드: `schedule_wbs_json` 컬럼, 일정 조회/저장 API, 일정 정규화 로직
- 프론트엔드: 일정 관리 페이지, WBS 에디터, 간트, 프로젝트 일정 불러오기 모달
- 문서: PRD/실행계획/입력스펙/REPO-MAP

## 비범위
- 다중 사용자 동시 편집 충돌 해결(락/CRDT)
- 자동 저장/히스토리 타임머신 UI
- 프로젝트 외부 시스템 캘린더 연동
