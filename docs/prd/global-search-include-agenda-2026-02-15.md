# PRD: 글로벌 검색에 안건 포함 (2026-02-15)

## 배경
현재 글로벌 검색(`/home?q=...`) 상단 패널은 **프로젝트 검색 결과만** 표시한다. 사용자는 글로벌 검색에서 프로젝트뿐 아니라 **안건(Agenda Thread)** 도 함께 검색되어 빠르게 이동하기를 원한다.

## 목표
1. 글로벌 검색 결과 상단 패널 제목을 `프로젝트 검색 결과`에서 `검색 결과`로 변경한다.
2. 상단 패널에 **프로젝트 + 안건** 검색 결과를 함께 표시한다.
3. 프로젝트/안건은 **아이콘으로 구분**한다.
4. 정렬은 다음을 만족한다.
   - 1순위: `score` 내림차순
   - 2순위: 동일 `score`일 때 `프로젝트 > 안건`

## 비목표
- 문서 검색(`/documents/search`) 결과 패널의 UI/정렬 변경은 본 작업 범위가 아니다.
- 프로젝트 상세/안건 상세 페이지의 기능 변경은 본 작업 범위가 아니다.

## 요구사항
### FE-REQ
- FE-REQ-001: `/home?q=...` 상단 패널의 제목이 `검색 결과`로 표시되어야 한다.
- FE-REQ-002: 상단 패널에 프로젝트/안건 결과가 함께 나타나야 한다.
- FE-REQ-003: 각 결과 항목은 프로젝트/안건을 아이콘으로 구분해야 한다.
- FE-REQ-004: 결과 항목은 `score` 기준으로 정렬되며, 동점 시 프로젝트가 안건보다 먼저 노출되어야 한다.

### BE-REQ
- BE-REQ-001: 글로벌 검색을 위한 안건 검색 API를 제공해야 한다.
  - `GET /agenda/threads/search?q=<query>&limit=<n>`
  - 응답은 최소한 다음 필드를 포함한다.
    - `thread_id`, `project_id`, `agenda_code`, `title`, `score`
    - (표시용) `project_name`, `project_code`, `snippet`
    - (디버깅/하이라이트용) `match_fields`, `matched_terms`, `snippet_field`

## 수용 기준(AC)
1. ES가 정상 기동된 상태에서 `q`가 존재할 때 `/home` 상단 패널에 프로젝트/안건 결과가 함께 표시된다.
2. 동일한 `score`를 가진 항목이 섞여 있을 때 프로젝트가 안건보다 먼저 표시된다.
3. `npm run verify:fast`가 통과한다.

