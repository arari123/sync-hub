# Execution Plan: Sync-Hub Frontend UI Refresh

## 1. Goal
FE-REQ-001~003을 충족하도록 검색/결과/업로드 상태 추적이 가능한 React 프론트엔드를 완성한다.

## 2. Entry Points
- Frontend: `http://localhost:3000`
- Main Component: `frontend/src/App.jsx`
- Global Style Tokens: `frontend/src/index.css`

## 3. Files-to-Touch
- `frontend/src/App.jsx`: 검색/결과/상세/업로드/상태 폴링 로직 구현.
- `frontend/src/App.css`: Glassmorphism 기반 레이아웃, 반응형, 애니메이션 스타일.
- `frontend/src/index.css`: 전역 토큰, 배경, 타이포그래피 정리.
- `scripts/verify_fast.sh`: root-owned `__pycache__` 환경에서도 동작하는 문법 검증으로 개선.
- `package.json`: `npm run verify`, `npm run verify:fast` 루트 스크립트 추가.
- `app/core/pipeline.py`: 경량 환경 fallback embedder 및 `.tolist()` 호환 처리.
- `app/core/vector_store.py`: Elasticsearch 미설치/미연결 시 in-memory fallback 추가.
- `app/api/documents.py`: 검색 벡터 타입(list/ndarray) 모두 처리.

## 4. Requirements ↔ Test Mapping
| REQ-ID | Test Case | Proof (Command/Output) |
| :--- | :--- | :--- |
| FE-REQ-001 | 검색창 입력 후 검색 API 호출 및 로딩 표시 | `npm run lint` (정적 검증 통과), `npm run build` (렌더링 가능한 번들 생성) |
| FE-REQ-002 | 결과 카드 렌더링 및 클릭 시 상세 정보 로딩 | `npm run build` 결과물 생성 (`dist/assets/index-*.js`) |
| FE-REQ-003 | PDF 업로드 + 상태 폴링 UI 렌더링 | `npm run lint` (업로드/폴링 로직 lint 통과) |

## 5. Implementation Steps
1. PRD(`docs/prd/frontend.md`)와 백엔드 API(`app/api/documents.py`) 응답 필드를 기준으로 상태 모델 정의.
2. 검색 폼/결과 목록/문서 상세 패널/업로드 드롭존을 단일 화면에서 동작하도록 `App.jsx` 재구성.
3. 업로드 후 `GET /documents/{doc_id}` 주기 폴링으로 상태 배지(대기/처리/완료/실패) 반영.
4. `App.css`, `index.css`에서 디자인 토큰/레이아웃/반응형/로딩 애니메이션 적용.
5. `npm run lint`, `npm run build`로 검증.

## 6. Rollback Plan
1. `frontend/src/App.jsx`, `frontend/src/App.css`, `frontend/src/index.css`를 이전 커밋 버전으로 복원.
2. 문제가 디자인 이슈인 경우 `App.css`만 부분 롤백하여 기능 로직은 유지.

## 7. Evidence
- `npm run lint` -> `eslint .` 성공 (에러 없음).
- `npm run build` -> `✓ built in 335ms`, `dist/index.html`, `dist/assets/index-*.css`, `dist/assets/index-*.js` 생성.
- `npm run verify:fast` -> `Running fast verification... Syntax check passed for 11 files.`
- `npm run verify` -> `{"status":"healthy"}`, `cluster_name: docker-cluster`, `All services are operational.`
- `bash scripts/verify_fast.sh` -> `Syntax check passed for 11 files.`
- 업로드 E2E: `POST /documents/upload` -> `{"id":2,"status":"pending"}`, 이후 `GET /documents/2` -> `status:"completed"`.
- 검색 E2E: `GET /documents/search?q=OCR&limit=5` -> `e2e.pdf` 결과 1건 반환.
